(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{40:function(e,t,a){e.exports=a(56)},45:function(e,t,a){},46:function(e,t,a){},50:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=(a(45),a(37)),s=a(5),i=(a(46),a(18)),u=a(39),m=function(){return r.a.createElement("div",null,r.a.createElement(u.a,{bg:"dark",variant:"dark"},r.a.createElement(i.a,null,r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{href:"/"},"Search")),r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{href:"/books"},"Saved")))))},f=function(){return r.a.createElement("footer",{className:"container-fluid pt-4 bg-dark text-light fixed-bottom"},r.a.createElement("p",{className:"text-center"},"\xa9 2021 Sandeep Ruby Bassi"))},d=a(36),v=(a(50),function(){return r.a.createElement(d.a,{fluid:!0,className:"jumbotron"},r.a.createElement("h1",null,"Show Me the Books"),r.a.createElement("h2",null,"Search and save your favourite books from Google Books database"))}),h=a(10),p=a.n(h),E=a(17),b=a(19),k=a(32),g=a(15),w=a(14),N=a(23),y=a(22),x=function(e){var t=e.books,a=e.saveBook;return r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement(N.a,null,t.map((function(e){return r.a.createElement("div",{key:e.id,className:"card mb-3"},r.a.createElement("div",{className:"row g-0"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{className:"cardImage card-img",alt:"book cover",src:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://picsum.photos/200/300"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.volumeInfo.title),r.a.createElement("p",{className:"card-text"},"Written by:"," ",e.volumeInfo.authors&&e.volumeInfo.authors.length>1?e.volumeInfo.authors.join(", "):e.volumeInfo.authors),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},e.volumeInfo.publishedDate)),r.a.createElement("p",{className:"card-text"},e.volumeInfo.description),r.a.createElement("a",{href:e.volumeInfo.previewLink,className:"btn btn-secondary"},"view on Google Books")," ",r.a.createElement(g.a,{variant:"success",onClick:function(){return a(e)}},"save book")))))})))))},j=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(b.a)(c,2),s=l[0],i=l[1],u=function(){var e=Object(E.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length<3)){e.next=2;break}return e.abrupt("return");case 2:return t.preventDefault(),n="https://www.googleapis.com/books/v1/volumes?q=".concat(a),e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,i(c.items||[]),o("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(E.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/books",a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)},e.next=4,fetch("/api/books",a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,console.log("book saved to db",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement("h2",null,"Book Search"),r.a.createElement(k.a.Control,{className:"mb-2 mr-sm-2",placeholder:"enter title or author",size:"lg",type:"text",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement(g.a,{type:"submit",className:"mb-2",onClick:u},"Search")),s.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Your Results"),r.a.createElement(x,{books:s,saveBook:function(e){var t={description:e.volumeInfo.description,image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"https://picsum.photos/200/300",link:e.volumeInfo.previewLink,title:e.volumeInfo.title,authors:e.volumeInfo.authors};m(t)}})):r.a.createElement("p",null,"Your search results will appear below."))},I=function(){return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(w.a,null,r.a.createElement(j,null)))},O=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){(function(){var e=Object(E.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/books");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,o(a||[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=function(){var e=Object(E.a)(p.a.mark((function e(t){var n,r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(a.filter((function(e){return e._id!==t}))),n="/api/books/".concat(t),r={method:"DELETE"},e.next=5,fetch(n,r);case 5:return c=e.sent,e.next=8,c.json();case 8:l=e.sent,console.log("book deleted to db",l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("h4",null,"Saved Books"),a.length>0?a.map((function(e){return r.a.createElement("div",{key:e._id,className:"card mb-3"},r.a.createElement("div",{className:"row g-0"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{className:"cardImage card-img",alt:"book cover",src:e.image?e.image:"https://picsum.photos/200/300"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},"Written by:"," ",e.authors&&e.authors.length>1?e.authors.join(", "):e.authors),r.a.createElement("p",{className:"card-text"},e.description),r.a.createElement("a",{href:e.link,className:"btn btn-secondary"},"view on Google Books")," ",r.a.createElement(g.a,{variant:"danger",onClick:function(){return c(e._id)}},"delete book")))))})):r.a.createElement("p",null,"Looks like you haven't saved any books yet. When you save your favourite books they will appear here.")))},S=function(){return r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(O,null))};var L=function(){return r.a.createElement(l.a,null,r.a.createElement(m,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:I}),r.a.createElement(s.a,{exact:!0,path:"/books",component:S})),r.a.createElement(f,null))},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(55);c.a.render(r.a.createElement(L,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");B?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):C(e)}))}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.c9b57662.chunk.js.map